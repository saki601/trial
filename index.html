<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Receive Chicken Delivery</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f7f9;
      padding: 2rem;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    .form-container {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 2rem;
    }

    .form-card {
      background: white;
      padding: 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      flex: 1 1 280px;
      min-width: 280px;
    }

    .form-card label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }

    .form-card input,
    .form-card select {
      width: 100%;
      padding: 0.6rem;
      margin-top: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 0.5rem;
    }

    .submit-btn {
      margin-top: 1.5rem;
      padding: 0.8rem 2rem;
      background-color: #4caf50;
      color: white;
      font-size: 1rem;
      border: none;
      border-radius: 0.6rem;
      cursor: pointer;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    .submit-btn:hover {
      background-color: #388e3c;
    }

    .filter-container {
      margin-top: 2rem;
      background: #ffffff;
      padding: 1rem;
      border-radius: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .filter-container label {
      font-weight: bold;
      margin-right: 0.5rem;
    }

    .filter-container input,
    .filter-container select {
      padding: 0.5rem;
      margin: 0.5rem 1rem 0.5rem 0;
      border-radius: 0.5rem;
      border: 1px solid #ccc;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 2rem;
      background: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    th, td {
      border: 1px solid #ddd;
      padding: 0.8rem;
      text-align: center;
    }

    th {
      background-color: #f0f0f0;
    }

    @media (max-width: 768px) {
      .form-container {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>

  <h1>Receive Chicken Delivery</h1>

  <div class="form-container">
    <div class="form-card">
      <label for="supplier">Supplier Name:</label>
      <input type="text" id="supplier" required>

      <label for="date">Date Received:</label>
      <input type="date" id="date" required>

      <label for="contact">Contact Info:</label>
      <input type="tel" id="contact" required>
    </div>

    <div class="form-card">
      <label for="numChickens">Number of Chickens:</label>
      <input type="number" id="numChickens" min="1" required>

      <label for="chickenAge">Chicken Age (in days):</label>
      <input type="number" id="chickenAge" min="1" required>

      <label for="weight">Average Weight (grams):</label>
      <input type="number" step="0.01" id="weight" required>
    </div>

    <div class="form-card">
      <label for="employee">Received by:</label>
      <select id="employee" required>
        <option value="">-- Select Employee --</option>
        <option value="Anna Santos">Anna Santos</option>
        <option value="Mark Reyes">Mark Reyes</option>
        <option value="Leo Cruz">Leo Cruz</option>
      </select>

      <label for="status">Batch Status:</label>
      <input type="text" id="status" placeholder="e.g., Healthy, Quarantine">
    </div>
  </div>

  <button class="submit-btn" onclick="submitForm()">Receive Delivery</button>

  <!-- Filter section -->
  <div class="filter-container">
    <label for="filterSupplier">Filter by Supplier:</label>
    <input type="text" id="filterSupplier" oninput="filterTable()">

    <label for="filterEmployee">Filter by Employee:</label>
    <select id="filterEmployee" onchange="filterTable()">
      <option value="">-- All --</option>
      <option value="Anna Santos">Anna Santos</option>
      <option value="Mark Reyes">Mark Reyes</option>
      <option value="Leo Cruz">Leo Cruz</option>
    </select>

    <label for="filterDate">Filter by Date:</label>
    <input type="date" id="filterDate" onchange="filterTable()">
  </div>

  <!-- Table -->
  <table id="deliveryTable">
    <thead>
      <tr>
        <th>Supplier</th>
        <th>Date Received</th>
        <th>Contact</th>
        <th>Chickens</th>
        <th>Age (days)</th>
        <th>Avg Weight (kg)</th>
        <th>Received By</th>
        <th>Status</th>
        <th>System Entry Date</th>
      </tr>
    </thead>
    <tbody id="deliveryBody">
      <!-- Rows will be added dynamically -->
    </tbody>
  </table>

  <script>
    // Set default date to today
    document.getElementById('date').value = new Date().toISOString().split('T')[0];

    function submitForm() {
      const supplier = document.getElementById('supplier').value.trim();
      const date = document.getElementById('date').value;
      const contact = document.getElementById('contact').value.trim();
      const numChickens = parseInt(document.getElementById('numChickens').value);
      const chickenAge = parseInt(document.getElementById('chickenAge').value);
      const weight = parseFloat(document.getElementById('weight').value);
      const employee = document.getElementById('employee').value;
      const status = document.getElementById('status').value.trim();

      if (!supplier || !date || !contact || !numChickens || !chickenAge || !weight || !employee) {
        alert("Please complete all required fields.");
        return;
      }

      if (numChickens <= 0 || chickenAge <= 0) {
        alert("Chickens and age must be greater than 0.");
        return;
      }

      const systemDate = new Date().toISOString().split('T')[0]; // Today's system entry date

      const table = document.getElementById('deliveryBody');
      const row = table.insertRow();
      row.insertCell(0).textContent = supplier;
      row.insertCell(1).textContent = date;
      row.insertCell(2).textContent = contact;
      row.insertCell(3).textContent = numChickens;
      row.insertCell(4).textContent = chickenAge;
      row.insertCell(5).textContent = weight.toFixed(2);
      row.insertCell(6).textContent = employee;
      row.insertCell(7).textContent = status || "N/A";
      row.insertCell(8).textContent = systemDate;

      // Clear form fields
      document.querySelectorAll("input, select").forEach(el => {
        if (el.type !== "date") el.value = "";
      });

      // Reset date to today
      document.getElementById('date').value = new Date().toISOString().split('T')[0];

      filterTable(); // Refresh table filters
    }

    function filterTable() {
      const supplierFilter = document.getElementById('filterSupplier').value.toLowerCase();
      const employeeFilter = document.getElementById('filterEmployee').value.toLowerCase();
      const dateFilter = document.getElementById('filterDate').value;

      const rows = document.querySelectorAll('#deliveryBody tr');
      rows.forEach(row => {
        const supplier = row.cells[0].textContent.toLowerCase();
        const date = row.cells[1].textContent;
        const employee = row.cells[6].textContent.toLowerCase();

        const matchesSupplier = supplier.includes(supplierFilter);
        const matchesEmployee = !employeeFilter || employee === employeeFilter;
        const matchesDate = !dateFilter || date === dateFilter;

        row.style.display = (matchesSupplier && matchesEmployee && matchesDate) ? '' : 'none';
      });
    }
  </script>

</body>
</html>
